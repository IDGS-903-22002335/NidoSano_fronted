<div class="h-screen flex items-center justify-center">
  <form class="shadow-md rounded-md p-8 bg-white w-[90%] max-w-6xl" [formGroup]="registerForm" (ngSubmit)="register()">

    <!-- Errores -->
    @for(error of errors; track error){
    <div class="bg-red-100 border mb-4 border-red-400 text-red-500 px-4 py-3 rounded relative">
      <span class="text-sm">{{error.description}}</span>
    </div>
    }

    <!-- Encabezado -->
    <div class="mb-6">
      <h1 class="font-bold text-2xl text-left">Registro</h1>
    </div>

    <!-- Formulario -->
<div class="grid gap-6 grid-cols-1 md:grid-cols-3 w-full">

  <!-- Email -->
  <mat-form-field appearance="fill" class="w-full col-span-1 md:col-span-3">
    <mat-label>Email</mat-label>
    <input matInput placeholder="Email" formControlName="email">
    <mat-icon matPrefix>email</mat-icon>
  </mat-form-field>

  <!-- Nombre -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Nombre</mat-label>
    <input matInput placeholder="Nombre" formControlName="fullName">
    <mat-icon matPrefix>person</mat-icon>
  </mat-form-field>

  <!-- Apellidos -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Apellidos</mat-label>
    <input matInput placeholder="Apellidos" formControlName="lastName">
    <mat-icon matPrefix>person</mat-icon>
  </mat-form-field>

  <!-- Dirección -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Dirección</mat-label>
    <input matInput placeholder="Dirección" formControlName="address">
    <mat-icon matPrefix>home</mat-icon>
  </mat-form-field>

  <!-- Ciudad -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Ciudad</mat-label>
    <input matInput placeholder="Ciudad" formControlName="city">
    <mat-icon matPrefix>location_city</mat-icon>
  </mat-form-field>

  <!-- Teléfono -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Teléfono</mat-label>
    <input matInput placeholder="Número de teléfono" formControlName="phoneNumber">
    <mat-icon matPrefix>phone</mat-icon>
  </mat-form-field>

  <!-- Estado -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Estado</mat-label>
    <input matInput placeholder="Estado" formControlName="state">
    <mat-icon matPrefix>location_on</mat-icon>
  </mat-form-field>

  <!-- Roles -->
  <mat-form-field appearance="fill" class="w-full col-span-1 md:col-span-3">
    <mat-label>Roles</mat-label>
    <mat-select formControlName="roles" multiple>
      @for (item of roles$ | async; track item) {
      <mat-option [value]="item.name">{{item.name}}</mat-option>
      }
    </mat-select>
    <mat-icon matPrefix>groups</mat-icon>
  </mat-form-field>

  <!-- Contraseña -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Contraseña</mat-label>
    <input matInput formControlName="password" [type]="passwordHide ? 'password' : 'text'" placeholder="Contraseña">
    <mat-icon matPrefix>lock</mat-icon>
    <mat-icon (click)="passwordHide = !passwordHide" matSuffix>{{passwordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
  </mat-form-field>

  <!-- Confirmar contraseña -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Confirmar Contraseña</mat-label>
    <input matInput formControlName="confirmPassword" [type]="confirmPasswordHide ? 'password' : 'text'" placeholder="Confirmar">
    <mat-icon matPrefix>lock</mat-icon>
    <mat-icon (click)="confirmPasswordHide = !confirmPasswordHide" matSuffix>{{confirmPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
  </mat-form-field>
</div>
    <!-- Error de contraseñas -->
    @if(registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched) {
    <div class="text-red-500 text-sm mt-2">
      Las contraseñas no coinciden.
    </div>
    }

    <div class="flex justify-center">
      <button type="submit" [disabled]="!registerForm.valid"
        class="mt-6 w-1/3 text-white rounded-md py-2 px-4 bg-green-600 hover:bg-green-700 disabled:bg-green-400">
        Registrar
      </button>
    </div>

  </form>
</div>
